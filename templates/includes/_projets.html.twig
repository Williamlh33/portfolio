<section class="section_projet" id="section_projet">
<h2 class="uk-text-center">PROJETS</h2>
	<div class="div_projets uk-container uk-container-large">
		<div class="uk-child-width-1-3@m uk-grid-medium uk-grid-match" uk-grid>
			{% for projet in projets %}
				<div class="dorian_bg">
					<div class="uk-card uk-card-default uk-card-body" data-full-description="{{ projet.description|e('html_attr') }}">
						<h3 class="uk-card-title">{{projet.title}}</h3>
						<a href="{{ projet.url }}" target="_blank"><img src="{{ asset('build/images/' ~ projet.image1) }}" alt=""></a>
						<p class="truncated-description uk-text-left">{{ projet.description|slice(0, 100) }} ...</p>
						<button class="toggle-button">Afficher plus</button>
						<div class="ensemble-etiquette_card uk-grid uk-flex uk-flex-center">
						{% for competences in projet.competence %}
							<div class="etiquette_card uk-width-1-2"> {{competences.name}} </div> 
						{% endfor %} 
						</div>                       
					</div>
				</div>
			{% endfor %}
		</div>
	</section>
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	<script>   
$(document).ready(function() {
    $(".toggle-button").click(function() {
        var $card = $(this).closest(".uk-card");
        var $description = $card.find(".truncated-description");
        var fullDescription = $card.data("full-description");

        // Utiliser une classe pour basculer l'état
        $card.toggleClass("expanded");

        if ($card.hasClass("expanded")) {
            // Si la classe "expanded" est présente, afficher la description complète
            $description.text(fullDescription);
			$(this).text("Afficher moins");
        } else {
            // Sinon, afficher la description tronquée
            $description.text(fullDescription.slice(0, 50));
			$(this).text("Afficher plus");
        }
    });
});
</script>
